{"version":3,"sources":["webpack:///./djsr/frontend/src/components/FormikMDInput.js","webpack:///./djsr/frontend/src/components/signup.js"],"names":["FormikMdInput","name","touched","value","errors","icon","onChange","onBlur","label","id","type","hideInput","disableAutocomplete","disabled","prepend","useState","active","setActive","join","e","console","log","Signup","props","state","token","FRS","email","password","passwordConfirm","Yup","shape","min","max","required","oneOf","values","helpers","setTimeout","setSubmitting","axiosInstanceNoAuth","post","username","then","response","setState","data","confirmation_token","history","push","error","errResponse","setValues","setTouched","setFieldError","handleChange","handleBlur","handleSubmit","isSubmitting","Component"],"mappings":"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","file":"8.main.js","sourcesContent":["import React, { useState } from \"react\";\n\nconst FormikMdInput = ({\n  name,\n  touched,\n  value,\n  errors,\n  icon,\n  onChange,\n  onBlur,\n  label,\n  id,\n  type,\n  hideInput,\n  disableAutocomplete,\n  disabled,\n  prepend,\n}) => {\n  const [active, setActive] = useState(false);\n  //todo repair prepend render\n\n  // console.log(\n  //   \"ninput\",\n  //   name,\n  //   active,\n  //   value === \"\",\n  //   value === null,\n  //   active || !(value == \"\" || value == null),\n  //     \"value\",\n  //     value\n  // );\n  return (\n    <div className=\"md-form form-group\">\n      {!!icon && (\n        <i\n          className={[\n            \"fa\",\n            icon,\n            \"prefix\",\n            touched ? (!errors ? \"text-success\" : \"red-text\") : \"\",\n          ].join(\" \")}\n        />\n      )}\n      {!!prepend && (\n        <div className=\"input-group-prepend\">\n          <span className=\"input-group-text\">{prepend}</span>\n        </div>\n      )}\n      <input\n        name={name}\n        onChange={onChange}\n        onBlur={(e) => {\n          onBlur(e);\n          setActive(false);\n        }}\n        onFocus={() => {\n            console.log(\"input focus event\",name)\n          setActive(true);\n        }}\n        value={value}\n        id={id}\n        type={type}\n        autoComplete={disableAutocomplete ? \"off\" : \"on\"}\n        // className=\"form-control is-invalid\"\n        className={[\n          \"form-control\",\n          touched ? (!errors ? \"is-valid\" : \"is-invalid\") : \"\",\n          hideInput ? \"text-password\" : \"\",\n          disabled ? \"disabled\" : \"\",\n        ].join(\" \")}\n        disabled={disabled}\n      />\n      <label\n        htmlFor={id}\n        className={[\n          touched ? (!errors ? \"is-valid\" : \"is-invalid\") : \"\",\n          active || !(value === \"\" || value === null) ? \"active\" : \"\",\n        ].join(\" \")}\n      >\n        {!!label ? label : \"\"}\n      </label>\n      {!!errors && !!touched && (\n        <div className=\"invalid-feedback d-block\">{errors}</div>\n      )}\n    </div>\n  );\n};\n\nexport default FormikMdInput;\n","import React, { Component } from \"react\";\nimport {\n  MDBBtn,\n  MDBCard,\n  MDBCardBody,\n  MDBCol,\n  MDBInput,\n  MDBRow,\n} from \"mdbreact\";\nimport { Form, Formik } from \"formik\";\nimport * as Yup from \"yup\";\nimport FormikMdInput from \"./FormikMDInput\";\nimport { axiosInstance, axiosInstanceNoAuth } from \"./axiosAPI\";\n\nclass Signup extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      token: null,\n    };\n  }\n\n  render() {\n    const FRS = \"Pole wymagane\";\n    return (\n      <MDBRow center>\n        <MDBCol md=\"6\" sm=\"8\" xs=\"12\" lg=\"6\" xl=\"4\">\n          <MDBCard>\n            <MDBCardBody className=\"p-md-5 p-lg-5 p-xl-5\">\n              <Formik\n                initialValues={{\n                  name: \"\",\n                  email: \"\",\n                  password: \"\",\n                  passwordConfirm: \"\",\n                }}\n                validationSchema={Yup.object().shape({\n                  name: Yup.string()\n                    .min(2, \"Too Short!\")\n                    .max(50, \"Too Long!\")\n                    .required(FRS),\n                  password: Yup.string()\n                    .min(8, \"Too Short!\")\n                    .max(50, \"Too Long!\")\n                    .required(FRS),\n                  passwordConfirm: Yup.string()\n                    .oneOf([Yup.ref(\"password\")], \"Hasła są różne\")\n                    .required(FRS),\n                  email: Yup.string()\n                    .email(\"Nieprawidłowy adres e-mail\")\n                    .required(FRS),\n                })}\n                onSubmit={(values, helpers) => {\n                  setTimeout(() => {\n                    helpers.setSubmitting(true);\n                    axiosInstanceNoAuth\n                      .post(\"/user/create/\", {\n                        username: values.name,\n                        password: values.password,\n                        email: values.email,\n                      })\n                      .then((response) => {\n                        helpers.setSubmitting(false);\n                        this.setState({\n                          token: response.data.confirmation_token,\n                        });\n                        this.props.history.push(`/signupsuccess/${response.data.confirmation_token}`)\n                      })\n                      .catch((error) => {\n                        // console.log(\"login error\", error.response);\n                        const errResponse = error.response;\n                        helpers.setSubmitting(false);\n                        helpers.setValues(\n                          {\n                            name: \"\",\n                            password: \"\",\n                            passwordConfirm: \"\",\n                            email: \"\",\n                          },\n                          false\n                        );\n                        helpers.setTouched(\n                          {\n                            name: false,\n                            password: false,\n                            email: false,\n                            passwordConfirm: false,\n                          },\n                          false\n                        );\n                        helpers.setFieldError(\n                          \"general\",\n                          \"Nierpawidłowa nazwa użytkownika lub hasło\"\n                        );\n                      });\n                  }, 5000);\n                }}\n              >\n                {({\n                  values,\n                  errors,\n                  touched,\n                  handleChange,\n                  handleBlur,\n                  handleSubmit,\n                  isSubmitting,\n                }) => (\n                  <Form onSubmit={handleSubmit}>\n                    <p className=\"h3 text-center mb-4\">Formularz rejestracji</p>\n                    <div className=\"grey-text\">\n                      <FormikMdInput\n                        label=\"Nazwa użytkownika\"\n                        icon=\"fa-user\"\n                        errors={errors.name}\n                        name=\"name\"\n                        id=\"name\"\n                        touched={touched.name}\n                        onChange={handleChange}\n                        onBlur={handleBlur}\n                        value={values.name}\n                        disabled={isSubmitting}\n                      />\n                      <FormikMdInput\n                        label=\"Twój adres E-mail\"\n                        icon=\"fa-envelope\"\n                        errors={errors.email}\n                        name=\"email\"\n                        id=\"email\"\n                        touched={touched.email}\n                        onChange={handleChange}\n                        onBlur={handleBlur}\n                        value={values.email}\n                        disabled={isSubmitting}\n                      />\n                      <FormikMdInput\n                        label=\"Hasło\"\n                        icon=\"fa-lock\"\n                        errors={errors.password}\n                        name=\"password\"\n                        id=\"password\"\n                        type=\"password\"\n                        touched={touched.password}\n                        onChange={handleChange}\n                        onBlur={handleBlur}\n                        value={values.password}\n                        hideInput\n                        disabled={isSubmitting}\n                      />\n                      <FormikMdInput\n                        label=\"Powtórz hasło\"\n                        icon=\"fa-lock\"\n                        errors={errors.passwordConfirm}\n                        name=\"passwordConfirm\"\n                        id=\"passwordConfirm\"\n                        type=\"password\"\n                        touched={touched.passwordConfirm}\n                        onChange={handleChange}\n                        onBlur={handleBlur}\n                        value={values.passwordConfirm}\n                        hideInput\n                        disabled={isSubmitting}\n                      />\n                    </div>\n                    <div className=\"text-center\">\n                      <MDBBtn color=\"primary\" type=\"submit\" disabled={isSubmitting}>\n                        Rejestracja\n                      </MDBBtn>\n                    </div>\n                  </Form>\n                )}\n              </Formik>\n                {!!this.state.token && <div>{this.state.token}</div>}\n            </MDBCardBody>\n          </MDBCard>\n        </MDBCol>\n      </MDBRow>\n    );\n  }\n}\nexport default Signup;\n"],"sourceRoot":""}